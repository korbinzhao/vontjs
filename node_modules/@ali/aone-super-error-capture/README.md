# aone-super-error-capture

é€šç”¨é”™è¯¯æ•è·æ’ä»¶ï¼Œæ”¯æŒå¤šç§å‰ç«¯æ¡†æ¶å’Œæ„å»ºå·¥å…·ã€‚

## ğŸ¤– Agentæ¨¡å‹ä½¿ç”¨æŒ‡å—

> **é‡è¦æç¤º**: åœ¨åˆ›å»ºä»»ä½•å‰ç«¯é¡¹ç›®æ—¶ï¼Œå¿…é¡»é›†æˆæ­¤é”™è¯¯æ•è·æ’ä»¶ã€‚

### ğŸ“‹ é¡¹ç›®ç±»å‹è¯†åˆ«ä¸é€‚é…å™¨é€‰æ‹©

| é¡¹ç›®ç‰¹å¾ | é¡¹ç›®ç±»å‹ | æ¨èé€‚é…å™¨ | å¯¼å…¥æ–¹å¼ |
|----------|----------|------------|----------|
| å­˜åœ¨ `ice.config.mjs` æˆ– `build.json` | Iceæ¡†æ¶ | `iceAdapter` | `import { iceAdapter }` |
| å­˜åœ¨ `vite.config.js` | Viteé¡¹ç›® | `viteAdapter` | `import viteAdapter` |
| å­˜åœ¨ `webpack.config.js` | Webpacké¡¹ç›® | `webpackAdapter` | `import { webpackAdapter }` |
| å­˜åœ¨ `rollup.config.js` | Rollupé¡¹ç›® | `rollupAdapter` | `import { rollupAdapter }` |
| å­˜åœ¨ `next.config.js` | Next.jsé¡¹ç›® | `nextjsAdapter` | `import { nextjsAdapter }` |
| å­˜åœ¨ `package.json` ä¸­çš„ `react-scripts` | Create React App | `injectErrorCaptureScript` | `import { injectErrorCaptureScript }` |

### ğŸ¯ æ ‡å‡†é›†æˆæµç¨‹

1. **å®‰è£…ä¾èµ–**
   ```bash
   npm install @ali/aone-super-error-capture
   ```

2. **é€‰æ‹©é€‚é…å™¨** (æ ¹æ®é¡¹ç›®ç±»å‹)
3. **é…ç½®æ’ä»¶** (ä½¿ç”¨å¯¹åº”çš„é…ç½®æ–¹å¼)
4. **éªŒè¯åŠŸèƒ½** (ç¡®ä¿é”™è¯¯æ•è·æ­£å¸¸å·¥ä½œ)

## Install

```bash
$ npm i @ali/aone-super-error-capture --save
```

## Usage

### Iceæ¡†æ¶

```js
import { iceAdapter } from '@ali/aone-super-error-capture';

// ice.config.mjs
export default {
  plugins: [
    iceAdapter()
  ]
};
```

### Viteé¡¹ç›®

```js
import viteAdapter from '@ali/aone-super-error-capture';

// vite.config.js
export default {
  plugins: [
    viteAdapter()
  ]
};
```

### Webpacké¡¹ç›®

```js
import { webpackAdapter } from '@ali/aone-super-error-capture';

// webpack.config.js
module.exports = {
  plugins: [
    webpackAdapter()
  ]
};
```

### Rollupé¡¹ç›®

```js
import { rollupAdapter } from '@ali/aone-super-error-capture';

// rollup.config.js
export default {
  plugins: [
    rollupAdapter()
  ]
};
```

### Next.jsé¡¹ç›®

```js
import { nextjsAdapter } from '@ali/aone-super-error-capture';

// next.config.js
const nextConfig = {
  webpack: (config) => {
    config.plugins.push(nextjsAdapter());
    return config;
  }
};
```

### Create React App

```js
import { injectErrorCaptureScript } from '@ali/aone-super-error-capture';

// src/index.js
injectErrorCaptureScript();
// ... å…¶ä»–ä»£ç 
```

## âš ï¸ é‡è¦æé†’

- âœ… **Viteé¡¹ç›®**: ä½¿ç”¨é»˜è®¤å¯¼å…¥ `import viteAdapter from '@ali/aone-super-error-capture'`
- âœ… **å…¶ä»–é¡¹ç›®**: ä½¿ç”¨å‘½åå¯¼å…¥ `import { adapter } from '@ali/aone-super-error-capture'`
- âœ… **CRAé¡¹ç›®**: ä½¿ç”¨æ‰‹åŠ¨æ³¨å…¥å‡½æ•° `injectErrorCaptureScript()`
- âœ… **éªŒè¯é…ç½®**: ç¡®ä¿é”™è¯¯æ•è·è„šæœ¬æ­£ç¡®æ³¨å…¥åˆ°HTMLä¸­
- âœ… **ESæ¨¡å—å…¼å®¹**: æ’ä»¶å·²ä¼˜åŒ–ä¸ºES2017æ ¼å¼ï¼Œå…¼å®¹ç°ä»£æ„å»ºå·¥å…·

## åŠŸèƒ½è¯´æ˜

- âœ… è‡ªåŠ¨æ•è·å…¨å±€JavaScriptè¿è¡Œæ—¶é”™è¯¯
- âœ… æ•è·æœªå¤„ç†çš„Promiseé”™è¯¯
- âœ… æ”¯æŒiframeç¯å¢ƒä¸‹çš„é”™è¯¯ä¸ŠæŠ¥
- âœ… é€šè¿‡postMessageå‘çˆ¶çª—å£å‘é€é”™è¯¯ä¿¡æ¯
- âœ… åŒ…å«é”™è¯¯æ¶ˆæ¯ã€å †æ ˆä¿¡æ¯å’Œæ—¶é—´æˆ³
- âœ… æ”¯æŒå¤šç§æ„å»ºå·¥å…·å’Œæ¡†æ¶
- âœ… ESæ¨¡å—å…¼å®¹æ€§ä¼˜åŒ–

## æ¡†æ¶å…¼å®¹æ€§

| æ¡†æ¶/å·¥å…· | æ”¯æŒçŠ¶æ€ | ä½¿ç”¨æ–¹å¼ |
|-----------|----------|----------|
| Ice | âœ… å®Œå…¨æ”¯æŒ | iceAdapter |
| Vite | âœ… å®Œå…¨æ”¯æŒ | viteAdapter |
| Vue + Vite | âœ… å®Œå…¨æ”¯æŒ | viteAdapter |
| React + Vite | âœ… å®Œå…¨æ”¯æŒ | viteAdapter |
| Webpack | âœ… æ”¯æŒ | webpackAdapter |
| Create React App | âœ… æ”¯æŒ | injectErrorCaptureScript |
| Next.js | âš ï¸ éƒ¨åˆ†æ”¯æŒ | nextjsAdapter |
| Rollup | âœ… æ”¯æŒ | rollupAdapter |
| Parcel | âš ï¸ éœ€è¦æµ‹è¯• | injectErrorCaptureScript |

## é”™è¯¯ç±»å‹

æ’ä»¶ä¼šæ•è·ä»¥ä¸‹ç±»å‹çš„é”™è¯¯ï¼š

1. **RUNTIME_ERROR**: JavaScriptè¿è¡Œæ—¶é”™è¯¯
2. **PROMISE_ERROR**: æœªå¤„ç†çš„Promiseé”™è¯¯
